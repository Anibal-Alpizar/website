---
import Section from "../commons/Section.astro";
import Card from "../commons/Card.astro";
import Badge from "../commons/Badge.astro";
import DownloadsBadge from "../commons/DownloadsBadge.astro";
import {
  MapIcon,
  XmlIcon,
  LandingIcon,
  NextJSIcon,
  TailwindCSSIcon,
  ShadcnUIIcon,
  TypeScriptIcon,
  NestJSIcon,
  GithubIcon,
  NPMIcon,
} from "../../icons";

const projects = [
  {
    title: "env-protector",
    description:
      "A lightweight TypeScript package for validating environment variables, ensuring they are properly set and typed to prevent runtime errors.",
    url: "https://www.npmjs.com/package/env-protector",
    github: "https://github.com/anibalalpizar/env-protector",
    icon: NPMIcon,
    downloads: 250,
    technologies: [{ icon: TypeScriptIcon, name: "TypeScript" }],
  },
  {
    title: "API GEO CR",
    description: "API for Costa Rica's provinces, cantons, and districts.",
    url: "https://api-geo-cr.vercel.app",
    github: "https://github.com/anibalalpizar/api-geo-cr",
    icon: MapIcon,
    technologies: [
      { icon: NestJSIcon, name: "NestJS" },
      { icon: TypeScriptIcon, name: "TypeScript" },
    ],
  },
  {
    title: "JSON to XML",
    description: "Easily convert JSON to XML with a modern UI.",
    url: "https://json-to-xml.vercel.app",
    github: "https://github.com/anibalalpizar/json-to-xml-converter",
    icon: XmlIcon,
    technologies: [
      { icon: NextJSIcon, name: "Next.js" },
      { icon: TailwindCSSIcon, name: "TailwindCSS" },
      { icon: ShadcnUIIcon, name: "shadcn/ui" },
      { icon: TypeScriptIcon, name: "TypeScript" },
    ],
  },
  {
    title: "Next.js Landing Page",
    description: "Open-source landing page built with Next.js and Shadcn UI.",
    url: "https://nextjs-shadcn-landing.vercel.app",
    github: "https://github.com/anibalalpizar/nextjs-shadcn-landing",
    icon: LandingIcon,
    technologies: [
      { icon: NextJSIcon, name: "Next.js" },
      { icon: TailwindCSSIcon, name: "TailwindCSS" },
      { icon: ShadcnUIIcon, name: "shadcn/ui" },
      { icon: TypeScriptIcon, name: "TypeScript" },
    ],
  },
];
---

<Section title="Personal Projects">
  <div class="projects-grid">
    {
      projects.map((project) => (
        <Card>
          <div class="project-header">
            <div class="title-section">
              <span class="icon">
                <project.icon />
              </span>
              <h3>{project.title}</h3>
              {project.downloads && (
                <DownloadsBadge downloads={project.downloads} />
              )}
            </div>
            <div class="links">
              <a
                href={project.github}
                target="_blank"
                rel="noopener noreferrer"
                title="View on GitHub"
              >
                <GithubIcon />
              </a>
              <a
                href={project.url}
                target="_blank"
                rel="noopener noreferrer"
                title="Live Demo"
              >
                â†’
              </a>
            </div>
          </div>
          <p>{project.description}</p>
          <div class="tech-stack">
            {project.technologies.map(({ icon: Icon, name }) => (
              <Badge>
                <Icon />
                <span>{name}</span>
              </Badge>
            ))}
          </div>
        </Card>
      ))
    }
  </div>
</Section>

<style>
  .projects-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
    gap: 0.5em;
    margin-top: 1rem;
  }

  .project-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 0.5rem;
  }

  .title-section {
    display: flex;
    align-items: center;
    gap: 0.5rem;
  }

  h3 {
    font-size: 1.1rem;
    color: var(--text-main);
    margin: 0;
  }

  p {
    font-size: 0.9rem;
    line-height: 1.5;
    margin-bottom: 1rem;
    color: var(--text-secondary);
  }

  .tech-stack {
    display: flex;
    flex-wrap: wrap;
    gap: 0.5rem;
  }

  .links {
    display: flex;
    gap: 0.75rem;
    align-items: center;
  }

  .links a {
    color: var(--text-main);
    display: flex;
    align-items: center;
    transition: color 0.3s ease;
  }

  .links a:hover {
    color: var(--text-secondary);
  }

  @media (max-width: 700px) {
    .projects-grid {
      grid-template-columns: 1fr;
    }
  }
</style>
